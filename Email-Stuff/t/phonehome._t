#!/usr/bin/perl -w

# Send a brief email

use strict;
use lib ();
use File::Spec::Functions ':ALL';
BEGIN {
	$| = 1;
	unless ( $ENV{HARNESS_ACTIVE} ) {
		require FindBin;
		chdir ($FindBin::Bin = $FindBin::Bin); # Avoid a warning
		lib->import( catdir( updir(), 'lib') );
	}
}





# Does everything load?
use Test::More tests => 2;
use Email::Stuff;

my $TEST_GIF = $ENV{HARNESS_ACTIVE}
	? catfile( 't', 'data', 'paypal.gif' )
	: catfile( 'data', 'paypal.gif' );
ok( -f $TEST_GIF, 'Found test image' );

# Specify the location of sendmail
use Email::Send::Sendmail;
$Email::Send::Sendmail::SENDMAIL = '/usr/sbin/sendmail';

my $rv = Email::Stuff->from       ( 'Adam Kennedy <adam@phase-n.com>' )
                     ->to         ( 'adam@phase-n.com'                )
                     ->subject    ( 'Hello To:!'                      )
                     ->text_body  ( 'I am an email'                   )
                     ->attach_file( $TEST_GIF                         )
                     ->send       ( @ARGV                             );
ok( $rv, 'Email sent ok' );

1;
